<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Golang - åŒTokenè®¤è¯</title>
    <link href="/Meng-Xin/Meng-Xin.github.io/2023/05/13/Golang-%E5%8F%8CToken%E8%AE%A4%E8%AF%81/"/>
    <url>/Meng-Xin/Meng-Xin.github.io/2023/05/13/Golang-%E5%8F%8CToken%E8%AE%A4%E8%AF%81/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å­¦ä¼šå¦‚ä½•åœ¨ Golang å¼€å‘ä¸­ä½¿ç”¨åŒTokenè¿›è¡ŒéªŒè¯ã€‚</p><span id="more"></span><h1 id="ä»€ä¹ˆæ˜¯-JWT"><a href="#ä»€ä¹ˆæ˜¯-JWT" class="headerlink" title="ä»€ä¹ˆæ˜¯ JWT ?"></a>ä»€ä¹ˆæ˜¯ JWT ?</h1><blockquote><p><code>jwt</code> ï¼šæ˜¯ json web token çš„ç¼©å†™ï¼Œjwt æ˜¯æœåŠ¡ç«¯é€šè¿‡ç‰¹å®šç®—æ³•ç”Ÿæˆçš„çš„ä¸€ä¸ªå‡­è¯ä¿¡æ¯ï¼Œä¸»è¦åŒ…å« <code>Header</code>ï¼ˆå¤´éƒ¨ï¼‰ã€<code>Payload</code>ï¼ˆè½½è·ï¼‰ã€<code>Signature</code>ï¼ˆç­¾åï¼‰ã€‚</p><p>å› ä¸ºhttp æ˜¯æ— çŠ¶æ€çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯è§¦å‘çš„httpè¯·æ±‚æˆ‘ä»¬ä¸çŸ¥é“ç”¨æˆ·çš„çŠ¶æ€ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™ä¸ªç”¨æˆ·å·²ç»ç™»é™†è¿‡äº†ã€‚æ‰€ä»¥è¡ç”Ÿå‡º</p></blockquote><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><blockquote><p>ä»¤ç‰Œå¤´éƒ¨ï¼Œè®°å½•äº†æ•´ä¸ªä»¤ç‰Œçš„ç±»å‹å’Œç­¾åç®—æ³•ï¼Œå®ƒæ˜¯ä¸€ä¸ªæè¿° jwtå…ƒæ•°æ®çš„ json å¯¹è±¡</p></blockquote><h2 id="Payload"><a href="#Payload" class="headerlink" title="Payload"></a>Payload</h2><blockquote><p>JWT ç¬¬äºŒéƒ¨åˆ†æ˜¯ Payloadï¼Œä¹Ÿæ˜¯ä¸€ä¸ª Json å¯¹è±¡ï¼Œé™¤äº†åŒ…å«éœ€è¦ä¼ é€’çš„æ•°æ®ï¼Œè¿˜æœ‰ä¸ƒä¸ªé»˜è®¤çš„å­—æ®µä¾›é€‰æ‹©ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ è‡³å°‘è¦ä½¿ç”¨ iss å’Œ  exp ã€‚</p></blockquote><ul><li>iss (issuer)ï¼šç­¾å‘äºº&#x2F;å‘è¡Œäºº</li><li>sub (subject)ï¼šä¸»é¢˜</li><li>aud (audience)ï¼šç”¨æˆ·</li><li>exp (expiration time)ï¼šè¿‡æœŸæ—¶é—´</li><li>nbf (Not Before)ï¼šç”Ÿæ•ˆæ—¶é—´ï¼Œåœ¨æ­¤ä¹‹å‰æ˜¯æ— æ•ˆçš„</li><li>iat (Issued At)ï¼šç­¾å‘æ—¶é—´</li><li>jti (JWT ID)ï¼šç”¨äºæ ‡è¯†è¯¥ JWT</li></ul><h2 id="SIgnature"><a href="#SIgnature" class="headerlink" title="SIgnature"></a>SIgnature</h2><blockquote><p>JWT ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾åï¼Œä¸»è¦çš„ç”Ÿæˆæ­¥éª¤æœ‰ä»¥ä¸‹å‡ ç‚¹ã€‚</p></blockquote><ol><li>é¦–å…ˆéœ€è¦æŒ‡å®šä¸€ä¸ª secretï¼Œè¯¥ secret ä»…ä»…ä¿å­˜åœ¨æœåŠ¡å™¨ä¸­ï¼Œä¿è¯ä¸èƒ½è®©å…¶ä»–ç”¨æˆ·çŸ¥é“ã€‚è¿™ä¸ªéƒ¨åˆ†éœ€è¦ base64URL åŠ å¯†åçš„ header å’Œ base64URL åŠ å¯†åçš„ payload ä½¿ç”¨ </li><li>ç„¶åé€šè¿‡header ä¸­å£°æ˜çš„åŠ å¯†ç®—æ³• è¿›è¡ŒåŠ ç›secretç»„åˆåŠ å¯†ï¼Œç„¶åå°±å¾—å‡ºä¸€ä¸ªç­¾åå“ˆå¸Œï¼Œä¹Ÿå°±æ˜¯Signatureï¼Œä¸”æ— æ³•åå‘è§£å¯†ã€‚</li></ol><h2 id="æ ¡éªŒjwt"><a href="#æ ¡éªŒjwt" class="headerlink" title="æ ¡éªŒjwt"></a>æ ¡éªŒjwt</h2><blockquote><p>å½“æœåŠ¡ç«¯ç”Ÿæˆjwtä¼ é€’ç»™å‰ç«¯åï¼Œå‰ç«¯ä¿å­˜ jwt ä¿¡æ¯åˆ°æµè§ˆå™¨æœ¬åœ°ï¼Œåç»­è¯·æ±‚é™„åŠ åˆ°è¯·æ±‚å¤´çš„ Authorization ä¸­ï¼ŒæœåŠ¡ç«¯é€šè¿‡ jwt çš„ <code>Header</code> å’Œ <code>Payload</code> ç”¨åŒä¸€å¥—å“ˆå¸Œç®—æ³•å’ŒåŒä¸€ä¸ª<code>secret</code> è®¡ç®—ç­¾åå€¼ï¼Œè®©åæŠŠè®¡ç®—ç»“æœå’Œå‰ç«¯ä¼ é€’çš„ jwt ç¬¬ä¸‰æ®µè¿›è¡Œæ¯”è¾ƒå¦‚æœç›¸åŒé‚£ä¹ˆå°±é€šè¿‡éªŒè¯ï¼Œ</p></blockquote><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><h3 id="jwt-å‡ºç°åœºæ™¯"><a href="#jwt-å‡ºç°åœºæ™¯" class="headerlink" title="jwt å‡ºç°åœºæ™¯"></a>jwt å‡ºç°åœºæ™¯</h3><blockquote><p>jwt çš„å‡ºç°æ˜¯å› ä¸º http æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”å› ä¸ºä½¿ç”¨ç®—æ³•è¿›è¡Œè®¡ç®—æ ¡éªŒç›¸æ¯”æœåŠ¡ç«¯å­˜å‚¨Session èŠ‚çœæ›´å¤šèµ„æº jwt èƒ½å¤Ÿé€‚ç”¨äºæ›´å¤šçš„åœºæ™¯ã€‚</p></blockquote><h3 id="jwt-ä¼˜ç¼ºç‚¹"><a href="#jwt-ä¼˜ç¼ºç‚¹" class="headerlink" title="jwt ä¼˜ç¼ºç‚¹"></a>jwt ä¼˜ç¼ºç‚¹</h3><p><strong>ä¼˜ç‚¹</strong></p><ul><li>æŒä¹…æ€§ï¼šæœåŠ¡ç«¯ä¸ç”¨å­˜å‚¨ç”Ÿæˆçš„ jwt ä¿¡æ¯ï¼ŒæœåŠ¡å™¨å³ä¾¿é‡å¯åä¹Ÿèƒ½å¯¹å†å²çš„ jwt è¿›è¡Œæ ¡éªŒã€‚</li><li>èŠ‚çœèµ„æºï¼šç›¸å¯¹äºé€šè¿‡ Session å­˜å‚¨ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼ŒæœåŠ¡ç«¯å¯ä»¥èŠ‚çœæ›´å¤šèµ„æºã€‚</li></ul><p><strong>ç¼ºç‚¹</strong></p><ul><li>å®‰å…¨æ€§ï¼šå› ä¸ºå¯ä»¥å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œé‚£ä¹ˆæ•°æ®å°±å¯ä»¥è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸” <code>Payload</code> éƒ¨åˆ†æ²¡æœ‰åŠ å¯†ï¼Œåªæ˜¯ä½¿ç”¨äº†Base64è¿›è¡Œç¼–ç ï¼Œæ‰€ä»¥ jwt ä¸èƒ½å­˜å‚¨æ•æ„Ÿä¿¡æ¯ã€‚</li><li>æ— æ³•ä¸­é€”åºŸå¼ƒï¼šjwt ä¸€æ—¦è¿›è¡Œç­¾å‘ï¼Œé‚£ä¹ˆåªèƒ½ç­‰åˆ°è¯¥å‡­æ®è‡ªåŠ¨è¿‡æœŸï¼Œæ— æ³•å¼ºåˆ¶è¿‡æœŸï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶åº”è¯¥å°½é‡ç”¨åˆé€‚çš„è¿‡æœŸæ—¶é—´å»ç­¾å‘ã€‚ï¼ˆåŒTokenè§£å†³ï¼‰</li><li>ç»­ç­¾é—®é¢˜ï¼šjwt ä»€ä¹ˆæ—¶å€™ç»­ç­¾ï¼Ÿå¦‚æœç»­ç­¾é¢‘ç¹å°±è¿èƒŒäº† jwt çš„è®¾è®¡åˆè¡·ï¼Œå¦‚æœä¸ç»­ç­¾ï¼Œåˆå½±å“ç”¨æˆ·ä½“éªŒã€‚ï¼ˆåŒToken è§£å†³ï¼‰</li></ul><h1 id="Golangï¼šåŒTokenç»­ç­¾"><a href="#Golangï¼šåŒTokenç»­ç­¾" class="headerlink" title="Golangï¼šåŒTokenç»­ç­¾"></a>Golangï¼šåŒTokenç»­ç­¾</h1><h2 id="å®ç°æ€æƒ³"><a href="#å®ç°æ€æƒ³" class="headerlink" title="å®ç°æ€æƒ³"></a>å®ç°æ€æƒ³</h2><blockquote><p>æ ¹æ®ä¸Šé¢çš„jwtçš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ†æé“ï¼Œjwt ç»­ç­¾æ‰æ˜¯é—®é¢˜æ‰€åœ¨ï¼Œé‚£ä¹ˆåªè¦ä¼˜é›…çš„è§£å†³ç»­ç­¾é—®é¢˜ï¼Œå…¶ä»–çš„å°±å¥½è¯´äº†ã€‚</p></blockquote><h3 id="1-çŸ­Token"><a href="#1-çŸ­Token" class="headerlink" title="1.çŸ­Token"></a>1.çŸ­Token</h3><blockquote><p>æˆ‘ä»¬ç®€ç§° Authorization ä¸ºAtokenï¼Œä»–æ˜¯ä¸€ä¸ªåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„ä¸»ä½“Tokenç”¨æ¥ï¼Œæ˜¯ç”¨æˆ·è®¿é—®æƒé™æ ¡éªŒçš„çœŸå®Toeknã€‚æ‰€ä»¥çŸ­Tokençš„ç”Ÿå‘½å‘¨æœŸå¾ˆçŸ­ï¼Œä½†æ˜¯ç»´æŠ¤è¦å¾ˆé¢‘ç¹ï¼Œæˆ‘ä»¬è¿™é‡Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¸º2å°æ—¶ã€‚ </p></blockquote><h3 id="2-é•¿Token"><a href="#2-é•¿Token" class="headerlink" title="2. é•¿Token"></a>2. é•¿Token</h3><blockquote><p>æˆ‘ä»¬ç®€ç§° Reflash ä¸º Rtokenï¼Œä»–æ˜¯ä¸€ä¸ªç”¨æ¥å¸®åŠ©åˆ·æ–°Atokençš„å‡­è¯ï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦è®°å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼Œå› æ­¤å®ƒéœ€è¦ä¸€ä¸ªè¾ƒé•¿çš„ç”Ÿå‘½å‘¨æœŸæ¥ä¿è¯ç»´æŠ¤çŸ­Tokençš„æ›´æ–°ã€‚æˆ‘ä»¬è¿™é‡Œè®¾ç½®è¿‡æœŸæ—¶é—´ä¸º 7 å¤©</p></blockquote><h3 id="3-ä»£ç æ€»è§ˆ"><a href="#3-ä»£ç æ€»è§ˆ" class="headerlink" title="3.ä»£ç æ€»è§ˆ"></a>3.ä»£ç æ€»è§ˆ</h3><blockquote><p>æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼šAtoken è‚¯å®šä¼šå…ˆè¿‡æœŸï¼Œè¿‡æœŸåå¦‚æœåœ¨Rtokençš„æ—¶é—´èŒƒå›´å†…ï¼Œé‚£ä¹ˆé‡æ–°ç”ŸæˆAtokenã€‚ä»¥æ­¤æ¥è¿›è¡Œç»´æŠ¤æ›´æ–°ã€‚</p></blockquote><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs golang"><span class="hljs-keyword">package</span> utils<br><br><span class="hljs-keyword">import</span> (<br><span class="hljs-string">&quot;errors&quot;</span><br><span class="hljs-string">&quot;github.com/golang-jwt/jwt/v5&quot;</span><br><span class="hljs-string">&quot;time&quot;</span><br>)<br><br><span class="hljs-keyword">const</span> (<br>ATokenExpiredDuration = <span class="hljs-number">2</span> * time.Hour<br>RTokenExpiredDuration = <span class="hljs-number">30</span> * <span class="hljs-number">24</span> * time.Hour<br>TokenIssuer           = <span class="hljs-string">&quot;admin&quot;</span><br>)<br><br><span class="hljs-keyword">var</span> (<br>mySecret          = []<span class="hljs-type">byte</span>(<span class="hljs-string">&quot;my Secret Decode&quot;</span>)<br>ErrorInvalidToken = errors.New(<span class="hljs-string">&quot;verify Token Failed&quot;</span>)<br>)<br><br><span class="hljs-comment">// PayLoad è½½è·ï¼Œæ³¨æ„ä¸è¦å­˜æ”¾ç”¨æˆ·æ•æ„Ÿæ•°æ®ã€‚</span><br><span class="hljs-keyword">type</span> PayLoad <span class="hljs-keyword">struct</span> &#123;<br>UserID   <span class="hljs-type">int64</span>  <span class="hljs-string">`json:&quot;user_id&quot;`</span><br>Username <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;username&quot;`</span><br>jwt.RegisteredClaims<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">getJWTTime</span><span class="hljs-params">(t time.Duration)</span></span> *jwt.NumericDate &#123;<br><span class="hljs-keyword">return</span> jwt.NewNumericDate(time.Now().Add(t))<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">keyFunc</span><span class="hljs-params">(token *jwt.Token)</span></span> (any, <span class="hljs-type">error</span>) &#123;<br><span class="hljs-keyword">return</span> mySecret, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">// GenToken é¢å‘token access token å’Œ refresh token</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">GenToken</span><span class="hljs-params">(userID <span class="hljs-type">int64</span>, userName <span class="hljs-type">string</span>)</span></span> (atoken, rtoken <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) &#123;<br><span class="hljs-comment">// æ„å»º å‡­è¯ åŸºç¡€ä¿¡æ¯</span><br>rc := jwt.RegisteredClaims&#123;<br>Issuer:    TokenIssuer,                       <span class="hljs-comment">// é¢å‘äºº</span><br>ExpiresAt: getJWTTime(ATokenExpiredDuration), <span class="hljs-comment">// åˆ°æœŸæ—¶é—´</span><br>&#125;<br><span class="hljs-comment">// ç»‘å®šè½½è·ä¿¡æ¯</span><br>at := PayLoad&#123;userID, userName, rc&#125;<br><span class="hljs-comment">// ä½¿ç”¨SHA256å¯¹è½½è·éå¯¹ç§°åŠ å¯†ï¼Œè¿›è¡Œç­¾åå’ŒåŠ ç›</span><br>atoken, err = jwt.NewWithClaims(jwt.SigningMethodHS256, at).SignedString(mySecret)<br><br><span class="hljs-comment">// refresh token é•¿tokenç”¨æ¥åˆ·æ–°ï¼Œæ‰€ä»¥ä¸éœ€è¦è½½è·ã€‚</span><br>rt := rc<br>rt.ExpiresAt = getJWTTime(RTokenExpiredDuration)<br>rtoken, err = jwt.NewWithClaims(jwt.SigningMethodHS256, rt).SignedString(mySecret)<br><br><span class="hljs-keyword">return</span> atoken, rtoken, err<br>&#125;<br><br><span class="hljs-comment">// VerifyToken éªŒè¯Token</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">VerifyToken</span><span class="hljs-params">(tokenId <span class="hljs-type">string</span>)</span></span> (pl *PayLoad, err <span class="hljs-type">error</span>) &#123;<br>token, err := jwt.ParseWithClaims(tokenId, pl, keyFunc)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span> pl, err<br>&#125;<br><span class="hljs-comment">// è§£ææˆåŠŸåä¸ºTrue</span><br><span class="hljs-keyword">if</span> !token.Valid &#123;<br>err = ErrorInvalidToken<br><span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>, err<br>&#125;<br><span class="hljs-keyword">return</span> pl, <span class="hljs-literal">nil</span><br>&#125;<br><br><span class="hljs-comment">// RefreshToken é€šè¿‡refresh token åˆ·æ–° çŸ­token(atoken)</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">RefreshToken</span><span class="hljs-params">(atoken, rtoken <span class="hljs-type">string</span>)</span></span> (newAtoken, newRtoken <span class="hljs-type">string</span>, err <span class="hljs-type">error</span>) &#123;<br><span class="hljs-comment">// rtoken æ— æ•ˆé€€å‡º</span><br><span class="hljs-keyword">if</span> _, err = jwt.Parse(rtoken, keyFunc); err != <span class="hljs-literal">nil</span> &#123;<br><span class="hljs-keyword">return</span><br>&#125;<br><span class="hljs-comment">// ä»æ—§çš„access token ä¸­è§£æå‡º payload æ•°æ®ä¿¡æ¯</span><br><span class="hljs-keyword">var</span> claim PayLoad<br><span class="hljs-comment">// æ ¡éªŒä¸é€šè¿‡ï¼Œå¹¶ä¸”è¯¥é”™è¯¯æ˜¯å› ä¸ºTokenè¿‡æœŸå¼•èµ·çš„ï¼Œé‚£ä¹ˆè¿›è¡Œç»­ç­¾ã€‚</span><br>_, err = jwt.ParseWithClaims(atoken, &amp;claim, keyFunc)<br><span class="hljs-keyword">if</span> err == jwt.ErrTokenExpired &#123;<br><span class="hljs-keyword">return</span> GenToken(claim.UserID, claim.Username)<br>&#125;<br><span class="hljs-keyword">return</span><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Golang</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Golang</tag>
      
      <tag>Token</tag>
      
      <tag>jwt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Golang å‘é€é‚®ä»¶ gomailä½¿ç”¨</title>
    <link href="/Meng-Xin/Meng-Xin.github.io/2023/02/19/Golang-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-gomail%E4%BD%BF%E7%94%A8/"/>
    <url>/Meng-Xin/Meng-Xin.github.io/2023/02/19/Golang-%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6-gomail%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h2><blockquote><p>è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ â€œgopkg.in&#x2F;gomail.v2â€</p></blockquote><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs maxima"><span class="hljs-built_in">go</span> <span class="hljs-built_in">get</span> gopkg.<span class="hljs-keyword">in</span>/gomail.v2<br></code></pre></td></tr></table></figure><blockquote><p>å¼€å¯ POP3&#x2F;IMAP&#x2F;SMTP&#x2F;Exchange&#x2F;CardDAV æœåŠ¡ æˆæƒç </p><p>ğŸ¦Šï¼š<a href="https://wx.mail.qq.com/account">https://wx.mail.qq.com/account</a></p></blockquote><h2 id="æ–¹æ³•å°è£…"><a href="#æ–¹æ³•å°è£…" class="headerlink" title="æ–¹æ³•å°è£…"></a>æ–¹æ³•å°è£…</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// SendMail å‘é€é‚®ä»¶</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">SendMail</span><span class="hljs-params">(mailTo []<span class="hljs-type">string</span>, subject <span class="hljs-type">string</span>, body <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">error</span> &#123;<br><span class="hljs-comment">// è®¾ç½®é‚®ç®±ä¸»ä½“</span><br>mailConn := <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>&#123;<br><span class="hljs-string">&quot;user&quot;</span>: <span class="hljs-string">&quot;xxxxxxxx@qq.com&quot;</span>, <span class="hljs-comment">//å‘é€äººé‚®ç®±ï¼ˆé‚®ç®±ä»¥è‡ªå·±çš„ä¸ºå‡†ï¼‰</span><br><span class="hljs-string">&quot;pass&quot;</span>: <span class="hljs-string">&quot;ä½¿ç”¨ä¸Šé¢çš„æˆæƒç &quot;</span>, <span class="hljs-comment">//å‘é€äººé‚®ç®±çš„å¯†ç ï¼Œç°åœ¨å¯èƒ½ä¼šéœ€è¦é‚®ç®± å¼€å¯æˆæƒå¯†ç ååœ¨passå¡«å†™æˆæƒç </span><br><span class="hljs-string">&quot;host&quot;</span>: <span class="hljs-string">&quot;smtp.qq.com&quot;</span>,      <span class="hljs-comment">//é‚®ç®±æœåŠ¡å™¨ï¼ˆæ­¤æ—¶ç”¨çš„æ˜¯qqé‚®ç®±ï¼‰</span><br>&#125;<br><br>m := gomail.NewMessage(<br><span class="hljs-comment">//å‘é€æ–‡æœ¬æ—¶è®¾ç½®ç¼–ç ï¼Œé˜²æ­¢ä¹±ç ã€‚ å¦‚æœtxtæ–‡æœ¬è®¾ç½®äº†ä¹‹åè¿˜æ˜¯ä¹±ç ï¼Œé‚£å¯ä»¥å°†åŸtxtæ–‡æœ¬åœ¨ä¿å­˜æ—¶</span><br><span class="hljs-comment">//å°±é€‰æ‹©utf-8æ ¼å¼ä¿å­˜</span><br>gomail.SetEncoding(gomail.Base64),<br>)<br>m.SetHeader(<span class="hljs-string">&quot;From&quot;</span>, m.FormatAddress(mailConn[<span class="hljs-string">&quot;user&quot;</span>], <span class="hljs-string">&quot;LLL&quot;</span>)) <span class="hljs-comment">// æ·»åŠ åˆ«å</span><br>m.SetHeader(<span class="hljs-string">&quot;To&quot;</span>, mailTo...)                                  <span class="hljs-comment">// å‘é€ç»™ç”¨æˆ·(å¯ä»¥å¤šä¸ª)</span><br>m.SetHeader(<span class="hljs-string">&quot;Subject&quot;</span>, subject)                               <span class="hljs-comment">// è®¾ç½®é‚®ä»¶ä¸»é¢˜</span><br>m.SetBody(<span class="hljs-string">&quot;text/html&quot;</span>, body)                                  <span class="hljs-comment">// è®¾ç½®é‚®ä»¶æ­£æ–‡</span><br><br><span class="hljs-comment">//ä¸€ä¸ªæ–‡ä»¶ï¼ˆåŠ å…¥å‘é€ä¸€ä¸ª txt æ–‡ä»¶ï¼‰ï¼š/tmp/foo.txtï¼Œæˆ‘éœ€è¦å°†è¿™ä¸ªæ–‡ä»¶ä»¥é‚®ä»¶é™„ä»¶çš„æ–¹å¼è¿›è¡Œå‘é€ï¼ŒåŒæ—¶æŒ‡å®šé™„ä»¶åä¸ºï¼šé™„ä»¶.txt</span><br><span class="hljs-comment">//åŒæ—¶è§£å†³äº†æ–‡ä»¶åä¹±ç é—®é¢˜</span><br>name := <span class="hljs-string">&quot;é™„ä»¶.txt&quot;</span><br>m.Attach(<span class="hljs-string">&quot;./gomail.txt&quot;</span>,<br>gomail.Rename(name), <span class="hljs-comment">//é‡å‘½å</span><br>gomail.SetHeader(<span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>][]<span class="hljs-type">string</span>&#123;<br><span class="hljs-string">&quot;Content-Disposition&quot;</span>: []<span class="hljs-type">string</span>&#123;<br>fmt.Sprintf(<span class="hljs-string">`attachment; filename=&quot;%s&quot;`</span>, mime.QEncoding.Encode(<span class="hljs-string">&quot;UTF-8&quot;</span>, name)),<br>&#125;,<br>&#125;),<br>)<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">   åˆ›å»ºSMTPå®¢æˆ·ç«¯ï¼Œè¿æ¥åˆ°è¿œç¨‹çš„é‚®ä»¶æœåŠ¡å™¨ï¼Œéœ€è¦æŒ‡å®šæœåŠ¡å™¨åœ°å€ã€ç«¯å£å·ã€ç”¨æˆ·åã€å¯†ç ï¼Œå¦‚æœç«¯å£å·ä¸º465çš„è¯ï¼Œ</span><br><span class="hljs-comment">   è‡ªåŠ¨å¼€å¯SSLï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æŒ‡å®šTLSConfig</span><br><span class="hljs-comment">*/</span><br>d := gomail.NewDialer(mailConn[<span class="hljs-string">&quot;host&quot;</span>], <span class="hljs-number">465</span>, mailConn[<span class="hljs-string">&quot;user&quot;</span>], mailConn[<span class="hljs-string">&quot;pass&quot;</span>]) <span class="hljs-comment">// è®¾ç½®é‚®ä»¶æ­£æ–‡</span><br><span class="hljs-comment">//d.TLSConfig = &amp;tls.Config&#123;InsecureSkipVerify: true&#125;</span><br>err := d.DialAndSend(m)<br><span class="hljs-keyword">return</span> err<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å‘é€é‚®ä»¶"><a href="#å‘é€é‚®ä»¶" class="headerlink" title="å‘é€é‚®ä»¶"></a>å‘é€é‚®ä»¶</h2><blockquote><p>ç›´æ¥è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•å°è£…å‡½æ•°å³å¯</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br><span class="hljs-comment">// é‚®ä»¶æ¥æ”¶æ–¹</span><br>mailTo := []<span class="hljs-type">string</span>&#123;<br><span class="hljs-comment">//å¯ä»¥æ˜¯å¤šä¸ªæ¥æ”¶äºº</span><br><span class="hljs-string">&quot;toObject@qq.com&quot;</span>,<br>&#125;<br><br>subject := <span class="hljs-string">&quot;Hello World!&quot;</span>    <span class="hljs-comment">// é‚®ä»¶ä¸»é¢˜</span><br>body := static.ParseString() <span class="hljs-comment">// é‚®ä»¶æ­£æ–‡</span><br><br>err := SendMail(mailTo, subject, body)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;Send fail! - &quot;</span>, err)<br><span class="hljs-keyword">return</span><br>&#125;<br>fmt.Println(<span class="hljs-string">&quot;Send successfully!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å°æŠ€å·§-å‘é€HTMLæ ¼å¼çš„é‚®ä»¶å†…å®¹"><a href="#å°æŠ€å·§-å‘é€HTMLæ ¼å¼çš„é‚®ä»¶å†…å®¹" class="headerlink" title="å°æŠ€å·§-å‘é€HTMLæ ¼å¼çš„é‚®ä»¶å†…å®¹"></a>å°æŠ€å·§-å‘é€HTMLæ ¼å¼çš„é‚®ä»¶å†…å®¹</h2><blockquote><p>ğŸ¦Šï¼šå¾ˆå¤šéœ€è¦éªŒè¯ç æ“ä½œçš„æµç¨‹ï¼Œæˆ‘ä»¬æ¥å—é‚®ä»¶ç»å¸¸å¯ä»¥çœ‹åˆ°ä¸€ä¸ª å°å·§ç²¾è‡´çš„å¡ç‰‡æ¨¡æ¿ã€‚è¿™ä¸ªå°±æ˜¯å°è£…HTMLåçš„æ ¼å¼ã€‚<img src="https://lwh-zfile.oss-cn-shanghai.aliyuncs.com/Blog/image-20230219164859201.png?Expires=1676797189&OSSAccessKeyId=TMP.3KecoKYsTmoCwo9ChYAQRibrWWFYZZ1CHpXJGuAjrxSvckEyK1LUfNa6amDNAnMH6cCko4GbQ1iqAoZTzgyXbQXg2SA4eo&Signature=L17ASqyMRPBwHjCfOsOYf+Mqt9Y="></p></blockquote><p>1.åˆ›å»ºæ ·å¼æ¨¡æ¿</p><blockquote><p>ä¾‹å¦‚ static&#x2F;cardEmail.html</p></blockquote><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">// ParseString è¯»å–å¯¹åº”æ–‡ä»¶è¾“å‡ºstring</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ParseString</span><span class="hljs-params">()</span></span> <span class="hljs-type">string</span> &#123;<br><span class="hljs-type">byte</span>, err := ioutil.ReadFile(<span class="hljs-string">&quot;./static/cardEmail.html&quot;</span>)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(<span class="hljs-string">&quot;ReadFile error:&quot;</span>, err)<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span><br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-type">string</span>(<span class="hljs-type">byte</span>)<br>&#125;<br><br><span class="hljs-comment">// å‘é€é‚®ä»¶</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span>&#123;<br>    styleInfo := ParseString()<br>    err := SendMail(mailTo, subject, styleInfo)<br>    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>        <span class="hljs-built_in">panic</span>(<span class="hljs-string">&quot;Send Email Error&quot;</span>+err.Error())<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Golang é‚®ä»¶</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>go-swaggerå®‰è£…ä¸ä½¿ç”¨</title>
    <link href="/Meng-Xin/Meng-Xin.github.io/2023/02/17/go-swagger%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
    <url>/Meng-Xin/Meng-Xin.github.io/2023/02/17/go-swagger%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h1 id="Golang-ç¯å¢ƒä¸‹ä½¿ç”¨-swagger"><a href="#Golang-ç¯å¢ƒä¸‹ä½¿ç”¨-swagger" class="headerlink" title="Golang ç¯å¢ƒä¸‹ä½¿ç”¨ swagger"></a>Golang ç¯å¢ƒä¸‹ä½¿ç”¨ swagger</h1><h2 id="1-å®‰è£…swaggerå·¥å…·"><a href="#1-å®‰è£…swaggerå·¥å…·" class="headerlink" title="1.å®‰è£…swaggerå·¥å…·"></a>1.å®‰è£…swaggerå·¥å…·</h2><blockquote><p>å…¨å±€ç¯å¢ƒå®‰è£… swagger-goå·¥å…·</p></blockquote><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment"># å·¥å…·å®‰è£…</span><br>go install github.com<span class="hljs-regexp">/swaggo/</span>swag<span class="hljs-regexp">/cmd/</span>swag@latest<br><span class="hljs-comment"># ä¾èµ–æºå®‰è£…</span><br>go get -u github.com<span class="hljs-regexp">/swaggo/gi</span>n-swagger<br>go get -u github.com<span class="hljs-regexp">/swaggo/</span>files<br></code></pre></td></tr></table></figure><h2 id="2-åˆæ­¥ä½¿ç”¨Swagger"><a href="#2-åˆæ­¥ä½¿ç”¨Swagger" class="headerlink" title="2.åˆæ­¥ä½¿ç”¨Swagger"></a>2.åˆæ­¥ä½¿ç”¨Swagger</h2><blockquote><p><code>swagåˆå§‹åŒ–</code> é»˜è®¤ç”Ÿæˆæ–‡ä»¶.&#x2F;docs&#x2F;</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">swag <span class="hljs-keyword">init</span><br></code></pre></td></tr></table></figure><p>main.go ä¸­åŒ¿åå¼•å…¥åŒ… â€œYouGoModName&#x2F;docsâ€</p><p><code>è·¯ç”±é›†æˆ</code> éœ€è¦åœ¨è·¯ç”±ä¸­é…ç½®æˆ‘ä»¬çš„swagger</p><p>ä¾‹å¦‚ï¼šä¸‹é¢è¿™æ®µä»£ç </p></blockquote><ol><li>åˆå§‹åŒ–ä½¿ç”¨ï¼šåœ¨é¡¹ç›®ç›®å½•ä½¿ç”¨å‘½ä»¤ <code>swag init</code></li><li>ä½¿ç”¨æ³¨è§£ï¼š</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs go"><span class="hljs-comment">//@Summaryåˆ›å»ºæ–‡ç« </span><br><span class="hljs-comment">//@Producejson</span><br><span class="hljs-comment">//@Paramuser_namebodystringtrue&quot;è´¦å·&quot;</span><br><span class="hljs-comment">//@Parampasswordbodystringtrue&quot;å¯†ç &quot;</span><br><span class="hljs-comment">//@Paramemailbodystringfalse&quot;é‚®ç®±&quot;</span><br><span class="hljs-comment">//@Paramnick_namebodyintfalse&quot;æ˜µç§°&quot;</span><br><span class="hljs-comment">//@Success200&#123;object&#125;Article&quot;æˆåŠŸ&quot;</span><br><span class="hljs-comment">//@Failure400&#123;object&#125;string&quot;è¯·æ±‚é”™è¯¯&quot;</span><br><span class="hljs-comment">//@Router/api/v1/user/register [post]</span><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">UserRegister</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br><span class="hljs-keyword">var</span> userRegisterService service.UserService<br>err := c.ShouldBindJSON(&amp;userRegisterService)<br><span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> &#123;<br>fmt.Println(err)<br>c.JSON(<span class="hljs-number">400</span>, <span class="hljs-string">&quot;æ³¨å†Œæ¥å£æ•°æ®æ ¼å¼é”™è¯¯&quot;</span>)<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>res := userRegisterService.Register(c.Request.Context())<br>c.JSON(<span class="hljs-number">200</span>, res)<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><ol start="3"><li>è·¯ç”±ç»„é…ç½®sawgger</li></ol><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs golang"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewRouter</span><span class="hljs-params">()</span></span> *gin.Engine &#123;<br>r := gin.Default()<br><br>r.Use(middleware.Cors())<br><br><span class="hljs-comment">// å…¬å…±è·¯ç”±ç»„</span><br>publicGroup := r.Group(<span class="hljs-string">&quot;&quot;</span>)<br>publicGroup.GET(<span class="hljs-string">&quot;/swagger/*any&quot;</span>, ginSwagger.WrapHandler(swaggerFiles.Handler))<br><br><span class="hljs-comment">// V1ç®¡ç†è·¯ç”±ç»„</span><br>v1 := r.Group(<span class="hljs-string">&quot;api/v1&quot;</span>)<br>&#123;<br>v1.GET(<span class="hljs-string">&quot;ping&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(c *gin.Context)</span></span> &#123;<br>c.JSON(http.StatusOK, <span class="hljs-string">&quot;Success&quot;</span>)<br>&#125;)<br><br><span class="hljs-comment">// ç”¨æˆ·æ“ä½œ</span><br>v1.POST(<span class="hljs-string">&quot;user/register&quot;</span>, api.UserRegister)<br>&#125;<br><br><span class="hljs-keyword">return</span> r<br>&#125;<br><br></code></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨ <code>swag fmt </code> æ ¼å¼åŒ–æˆ‘ä»¬çš„æ³¨è§£ä¿¡æ¯</li><li>ä½¿ç”¨ <code>swag init</code> é‡æ–°åŠ è½½ç”Ÿæˆæˆ‘ä»¬çš„æ³¨è§£å¯¹åº”docæ–‡ä»¶ã€‚</li><li>å¯åŠ¨é¡¹ç›®ï¼Œç‚¹å‡»ï¼š<a href="http://127.0.0.1/swagger/index.html">Swagger UI</a> å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„é…ç½®æ˜¯å¦æˆåŠŸè¿è¡Œäº†ã€‚</li></ol>]]></content>
    
    
    
    <tags>
      
      <tag>Golang | go-swagger | gin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux ä¸‹å®‰è£…Golangç¯å¢ƒ</title>
    <link href="/Meng-Xin/Meng-Xin.github.io/2023/02/17/Linux-%E4%B8%8B%E5%AE%89%E8%A3%85Golang%E7%8E%AF%E5%A2%83/"/>
    <url>/Meng-Xin/Meng-Xin.github.io/2023/02/17/Linux-%E4%B8%8B%E5%AE%89%E8%A3%85Golang%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<h2 id="ç¯å¢ƒå®‰è£…å‰æ"><a href="#ç¯å¢ƒå®‰è£…å‰æ" class="headerlink" title="ç¯å¢ƒå®‰è£…å‰æ"></a>ç¯å¢ƒå®‰è£…å‰æ</h2><p>  1.æŸ¥çœ‹å®‰è£…ç‰©ç†æœºä¿¡æ¯<br>  <figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs autoit">[root<span class="hljs-symbol">@VM</span><span class="hljs-number">-16</span><span class="hljs-number">-14</span>-centos ~]<span class="hljs-meta"># uname -m</span><br>x86_64<br></code></pre></td></tr></table></figure><br>  2.æ ¹æ®è¾“å‡ºä¿¡æ¯å»Golangå®˜ç½‘ä¸‹è½½å¯¹åº”å®‰è£…åŒ…<br>  [Golangå®˜ç½‘](<a href="https://golang.google.cn/dl/">Downloads - The Go Programming Language (google.cn)</a>)<br>  3.ä½¿ç”¨è¿œç¨‹æ‹·è´å‘½ä»¤</p>  <figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs elixir">scp go1.<span class="hljs-number">20</span>.linux-amd64.tar.gz remote_username<span class="hljs-variable">@remote_ip</span><span class="hljs-symbol">:remote_file</span> <br><span class="hljs-comment">#ä¾‹å¦‚æˆ‘çš„</span><br>scp go1.<span class="hljs-number">20</span>.linux-amd64.tar.gz root<span class="hljs-variable">@192</span>.<span class="hljs-number">168.247</span>.<span class="hljs-number">1</span><span class="hljs-symbol">:/root</span><br></code></pre></td></tr></table></figure><p> 4.è§£å‹æ–‡ä»¶ï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡ã€‚<br>  <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-comment">#è§£å‹åˆ°  /usr/local</span><br>tar -C /usr/local -zxvf  go1.20.linux-amd64.tar.gz<br><span class="hljs-comment">#é…ç½®ç¯å¢ƒå˜é‡</span><br>sudo vim ~/.bashrc#åœ¨å°¾éƒ¨å†™å…¥<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">GOROOT</span>=/usr/local/go<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=<span class="hljs-variable">$PATH</span>:$GOROOT/bin<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">GOPATH</span>=/home/hesunfly/code/go<br><span class="hljs-comment">#ä¿å­˜é€€å‡º</span><br>:wq<br></code></pre></td></tr></table></figure><br>  5.åˆ·æ–°é…ç½®<br><code>source ~/.bashrc</code><br>  6.æµ‹è¯•ä½¿ç”¨<br>  <code>go env æ­£å¸¸è¾“å‡ºå³å¯</code><br>  7.é…ç½®ä¸ƒç‰›äº‘ä»£ç†</p>  <figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">GO111MODULE</span>=on<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">GOPROXY</span>=https://goproxy.cn<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>Golang Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/Meng-Xin/Meng-Xin.github.io/2023/02/16/hello-world/"/>
    <url>/Meng-Xin/Meng-Xin.github.io/2023/02/16/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
